{"version":3,"mappings":"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","names":["MountedMapsContext","React.createContext","useMap","_a","maps","useContext","currentMap","MapContext","useMemo","arePointsEqual","a","b","ax","ay","bx","by","deepEqual","i","aKeys","bKeys","key","cloneTransform","tr","newTransform","syncProjection","src","dest","srcProjection","destProjection","transformToViewState","applyViewStateToTransform","props","v","changed","center","zoom","bearing","pitch","refProps","normalizeStyle","style","layerIndex","layer","layers","normalizedLayer","layerRef","propName","DEFAULT_STYLE","pointerEvents","cameraEvents","otherEvents","settingNames","handlerNames","Mapbox","MapClass","container","e","cb","oldProps","settingsChanged","sizeChanged","viewStateChanged","that","map","oldContainer","resizeObserver","initialViewState","mapStyle","mapOptions","getAccessTokenFromEnv","viewState","getContext","renderMap","arg","runRenderTaskQueue","fireEvent","eventName","children","renderTransform","nextProps","triggerEvents","isMoving","deferredEvents","currProps","setter","styleDiffing","options","_b","newValue","oldValue","point","interactiveLayerIds","eventType","wasHovering","features","isHovering","baseFire","event","properties","accessToken","match","skipMethods","createRef","mapInstance","result","lnglat","getMethodNames","obj","proto","useIsomorphicLayoutEffect","useLayoutEffect","useEffect","globalSettings","setGlobals","mapLib","RTLTextPlugin","error","Map","ref","defaultLib","mountedMapsContext","setMapInstance","useState","containerRef","useRef","contextValue","isMounted","mapbox","module","mapboxgl","onError","useImperativeHandle","CHILD_CONTAINER_STYLE","React.createElement","unitlessNumber","applyReactStyle","element","styles","value","Marker","thisRef","marker","hasChildren","React.Children","el","mk","evt","longitude","latitude","offset","draggable","popup","rotation","rotationAlignment","pitchAlignment","createPortal","_Marker","memo","forwardRef","getClassList","className","Popup","pp","onClose","prevClassList","nextClassList","c","_Popup","useControl","onCreate","arg1","arg2","arg3","context","ctrl","opts","onAdd","onRemove","AttributionControl","FullscreenControl","GeolocateControl","gc","setupUI","args","NavigationControl","ScaleControl","propsRef","prevProps","_useMap","__vitePreload","React.forwardRef","_Map"],"sources":["../../../../node_modules/react-map-gl/dist/esm/components/use-map.js","../../../../node_modules/react-map-gl/dist/esm/utils/deep-equal.js","../../../../node_modules/react-map-gl/dist/esm/utils/transform.js","../../../../node_modules/react-map-gl/dist/esm/utils/style-utils.js","../../../../node_modules/react-map-gl/dist/esm/mapbox/mapbox.js","../../../../node_modules/react-map-gl/dist/esm/mapbox/create-ref.js","../../../../node_modules/react-map-gl/dist/esm/utils/use-isomorphic-layout-effect.js","../../../../node_modules/react-map-gl/dist/esm/utils/set-globals.js","../../../../node_modules/react-map-gl/dist/esm/components/map.js","../../../../node_modules/react-map-gl/dist/esm/utils/apply-react-style.js","../../../../node_modules/react-map-gl/dist/esm/components/marker.js","../../../../node_modules/react-map-gl/dist/esm/components/popup.js","../../../../node_modules/react-map-gl/dist/esm/components/use-control.js","../../../../node_modules/react-map-gl/dist/esm/components/attribution-control.js","../../../../node_modules/react-map-gl/dist/esm/components/fullscreen-control.js","../../../../node_modules/react-map-gl/dist/esm/components/geolocate-control.js","../../../../node_modules/react-map-gl/dist/esm/components/navigation-control.js","../../../../node_modules/react-map-gl/dist/esm/components/scale-control.js","../../../../node_modules/react-map-gl/dist/esm/exports-mapbox.js"],"sourcesContent":["import * as React from 'react';\nimport { useState, useCallback, useMemo, useContext } from 'react';\nimport { MapContext } from './map';\nexport const MountedMapsContext = React.createContext(null);\nexport const MapProvider = props => {\n    const [maps, setMaps] = useState({});\n    const onMapMount = useCallback((map, id = 'default') => {\n        setMaps(currMaps => {\n            if (id === 'current') {\n                throw new Error(\"'current' cannot be used as map id\");\n            }\n            if (currMaps[id]) {\n                throw new Error(`Multiple maps with the same id: ${id}`);\n            }\n            return { ...currMaps, [id]: map };\n        });\n    }, []);\n    const onMapUnmount = useCallback((id = 'default') => {\n        setMaps(currMaps => {\n            if (currMaps[id]) {\n                const nextMaps = { ...currMaps };\n                delete nextMaps[id];\n                return nextMaps;\n            }\n            return currMaps;\n        });\n    }, []);\n    return (React.createElement(MountedMapsContext.Provider, { value: {\n            maps,\n            onMapMount,\n            onMapUnmount\n        } }, props.children));\n};\nexport function useMap() {\n    var _a;\n    const maps = (_a = useContext(MountedMapsContext)) === null || _a === void 0 ? void 0 : _a.maps;\n    const currentMap = useContext(MapContext);\n    const mapsWithCurrent = useMemo(() => {\n        return { ...maps, current: currentMap === null || currentMap === void 0 ? void 0 : currentMap.map };\n    }, [maps, currentMap]);\n    return mapsWithCurrent;\n}\n//# sourceMappingURL=use-map.js.map","/**\n * Compare two points\n * @param a\n * @param b\n * @returns true if the points are equal\n */\nexport function arePointsEqual(a, b) {\n    const ax = Array.isArray(a) ? a[0] : a ? a.x : 0;\n    const ay = Array.isArray(a) ? a[1] : a ? a.y : 0;\n    const bx = Array.isArray(b) ? b[0] : b ? b.x : 0;\n    const by = Array.isArray(b) ? b[1] : b ? b.y : 0;\n    return ax === bx && ay === by;\n}\n/* eslint-disable complexity */\n/**\n * Compare any two objects\n * @param a\n * @param b\n * @returns true if the objects are deep equal\n */\nexport function deepEqual(a, b) {\n    if (a === b) {\n        return true;\n    }\n    if (!a || !b) {\n        return false;\n    }\n    if (Array.isArray(a)) {\n        if (!Array.isArray(b) || a.length !== b.length) {\n            return false;\n        }\n        for (let i = 0; i < a.length; i++) {\n            if (!deepEqual(a[i], b[i])) {\n                return false;\n            }\n        }\n        return true;\n    }\n    else if (Array.isArray(b)) {\n        return false;\n    }\n    if (typeof a === 'object' && typeof b === 'object') {\n        const aKeys = Object.keys(a);\n        const bKeys = Object.keys(b);\n        if (aKeys.length !== bKeys.length) {\n            return false;\n        }\n        for (const key of aKeys) {\n            if (!b.hasOwnProperty(key)) {\n                return false;\n            }\n            if (!deepEqual(a[key], b[key])) {\n                return false;\n            }\n        }\n        return true;\n    }\n    return false;\n}\n//# sourceMappingURL=deep-equal.js.map","import { deepEqual } from './deep-equal';\n/**\n * Make a copy of a transform\n * @param tr\n */\nexport function cloneTransform(tr) {\n    const newTransform = tr.clone();\n    // Work around mapbox bug - this value is not assigned in clone(), only in resize()\n    newTransform.pixelsToGLUnits = tr.pixelsToGLUnits;\n    return newTransform;\n}\n/**\n * Copy projection from one transform to another. This only applies to mapbox-gl transforms\n * @param src the transform to copy projection settings from\n * @param dest to transform to copy projection settings to\n */\nexport function syncProjection(src, dest) {\n    if (!src.getProjection) {\n        return;\n    }\n    const srcProjection = src.getProjection();\n    const destProjection = dest.getProjection();\n    if (!deepEqual(srcProjection, destProjection)) {\n        dest.setProjection(srcProjection);\n    }\n}\n/**\n * Capture a transform's current state\n * @param transform\n * @returns descriptor of the view state\n */\nexport function transformToViewState(tr) {\n    return {\n        longitude: tr.center.lng,\n        latitude: tr.center.lat,\n        zoom: tr.zoom,\n        pitch: tr.pitch,\n        bearing: tr.bearing,\n        padding: tr.padding\n    };\n}\n/* eslint-disable complexity */\n/**\n * Mutate a transform to match the given view state\n * @param transform\n * @param viewState\n * @returns true if the transform has changed\n */\nexport function applyViewStateToTransform(tr, props) {\n    const v = props.viewState || props;\n    let changed = false;\n    if ('longitude' in v && 'latitude' in v) {\n        const center = tr.center;\n        // @ts-ignore\n        tr.center = new center.constructor(v.longitude, v.latitude);\n        changed = changed || center !== tr.center;\n    }\n    if ('zoom' in v) {\n        const zoom = tr.zoom;\n        tr.zoom = v.zoom;\n        changed = changed || zoom !== tr.zoom;\n    }\n    if ('bearing' in v) {\n        const bearing = tr.bearing;\n        tr.bearing = v.bearing;\n        changed = changed || bearing !== tr.bearing;\n    }\n    if ('pitch' in v) {\n        const pitch = tr.pitch;\n        tr.pitch = v.pitch;\n        changed = changed || pitch !== tr.pitch;\n    }\n    if (v.padding && !tr.isPaddingEqual(v.padding)) {\n        changed = true;\n        tr.padding = v.padding;\n    }\n    return changed;\n}\n//# sourceMappingURL=transform.js.map","const refProps = ['type', 'source', 'source-layer', 'minzoom', 'maxzoom', 'filter', 'layout'];\n// Prepare a map style object for diffing\n// If immutable - convert to plain object\n// Work around some issues in older styles that would fail Mapbox's diffing\nexport function normalizeStyle(style) {\n    if (!style) {\n        return null;\n    }\n    if (typeof style === 'string') {\n        return style;\n    }\n    if ('toJS' in style) {\n        style = style.toJS();\n    }\n    if (!style.layers) {\n        return style;\n    }\n    const layerIndex = {};\n    for (const layer of style.layers) {\n        layerIndex[layer.id] = layer;\n    }\n    const layers = style.layers.map(layer => {\n        let normalizedLayer = null;\n        if ('interactive' in layer) {\n            normalizedLayer = Object.assign({}, layer);\n            // Breaks style diffing :(\n            // @ts-ignore legacy field not typed\n            delete normalizedLayer.interactive;\n        }\n        // Style diffing doesn't work with refs so expand them out manually before diffing.\n        // @ts-ignore legacy field not typed\n        const layerRef = layerIndex[layer.ref];\n        if (layerRef) {\n            normalizedLayer = normalizedLayer || Object.assign({}, layer);\n            // @ts-ignore\n            delete normalizedLayer.ref;\n            // https://github.com/mapbox/mapbox-gl-js/blob/master/src/style-spec/deref.js\n            for (const propName of refProps) {\n                if (propName in layerRef) {\n                    normalizedLayer[propName] = layerRef[propName];\n                }\n            }\n        }\n        return normalizedLayer || layer;\n    });\n    // Do not mutate the style object provided by the user\n    return { ...style, layers };\n}\n//# sourceMappingURL=style-utils.js.map","import { transformToViewState, applyViewStateToTransform, cloneTransform, syncProjection } from '../utils/transform';\nimport { normalizeStyle } from '../utils/style-utils';\nimport { deepEqual } from '../utils/deep-equal';\nconst DEFAULT_STYLE = { version: 8, sources: {}, layers: [] };\nconst pointerEvents = {\n    mousedown: 'onMouseDown',\n    mouseup: 'onMouseUp',\n    mouseover: 'onMouseOver',\n    mousemove: 'onMouseMove',\n    click: 'onClick',\n    dblclick: 'onDblClick',\n    mouseenter: 'onMouseEnter',\n    mouseleave: 'onMouseLeave',\n    mouseout: 'onMouseOut',\n    contextmenu: 'onContextMenu',\n    touchstart: 'onTouchStart',\n    touchend: 'onTouchEnd',\n    touchmove: 'onTouchMove',\n    touchcancel: 'onTouchCancel'\n};\nconst cameraEvents = {\n    movestart: 'onMoveStart',\n    move: 'onMove',\n    moveend: 'onMoveEnd',\n    dragstart: 'onDragStart',\n    drag: 'onDrag',\n    dragend: 'onDragEnd',\n    zoomstart: 'onZoomStart',\n    zoom: 'onZoom',\n    zoomend: 'onZoomEnd',\n    rotatestart: 'onRotateStart',\n    rotate: 'onRotate',\n    rotateend: 'onRotateEnd',\n    pitchstart: 'onPitchStart',\n    pitch: 'onPitch',\n    pitchend: 'onPitchEnd'\n};\nconst otherEvents = {\n    wheel: 'onWheel',\n    boxzoomstart: 'onBoxZoomStart',\n    boxzoomend: 'onBoxZoomEnd',\n    boxzoomcancel: 'onBoxZoomCancel',\n    resize: 'onResize',\n    load: 'onLoad',\n    render: 'onRender',\n    idle: 'onIdle',\n    remove: 'onRemove',\n    data: 'onData',\n    styledata: 'onStyleData',\n    sourcedata: 'onSourceData',\n    error: 'onError'\n};\nconst settingNames = [\n    'minZoom',\n    'maxZoom',\n    'minPitch',\n    'maxPitch',\n    'maxBounds',\n    'projection',\n    'renderWorldCopies'\n];\nconst handlerNames = [\n    'scrollZoom',\n    'boxZoom',\n    'dragRotate',\n    'dragPan',\n    'keyboard',\n    'doubleClickZoom',\n    'touchZoomRotate',\n    'touchPitch'\n];\n/**\n * A wrapper for mapbox-gl's Map class\n */\nexport default class Mapbox {\n    constructor(MapClass, props, container) {\n        // mapboxgl.Map instance\n        this._map = null;\n        // Internal states\n        this._internalUpdate = false;\n        this._inRender = false;\n        this._hoveredFeatures = null;\n        this._deferredEvents = {\n            move: false,\n            zoom: false,\n            pitch: false,\n            rotate: false\n        };\n        this._onEvent = (e) => {\n            // @ts-ignore\n            const cb = this.props[otherEvents[e.type]];\n            if (cb) {\n                cb(e);\n            }\n            else if (e.type === 'error') {\n                console.error(e.error); // eslint-disable-line\n            }\n        };\n        this._onPointerEvent = (e) => {\n            if (e.type === 'mousemove' || e.type === 'mouseout') {\n                this._updateHover(e);\n            }\n            // @ts-ignore\n            const cb = this.props[pointerEvents[e.type]];\n            if (cb) {\n                if (this.props.interactiveLayerIds && e.type !== 'mouseover' && e.type !== 'mouseout') {\n                    e.features = this._hoveredFeatures || this._queryRenderedFeatures(e.point);\n                }\n                cb(e);\n                delete e.features;\n            }\n        };\n        this._onCameraEvent = (e) => {\n            if (!this._internalUpdate) {\n                // @ts-ignore\n                const cb = this.props[cameraEvents[e.type]];\n                if (cb) {\n                    cb(e);\n                }\n            }\n            if (e.type in this._deferredEvents) {\n                this._deferredEvents[e.type] = false;\n            }\n        };\n        this._MapClass = MapClass;\n        this.props = props;\n        this._initialize(container);\n    }\n    get map() {\n        return this._map;\n    }\n    get transform() {\n        return this._renderTransform;\n    }\n    setProps(props) {\n        const oldProps = this.props;\n        this.props = props;\n        const settingsChanged = this._updateSettings(props, oldProps);\n        if (settingsChanged) {\n            this._createShadowTransform(this._map);\n        }\n        const sizeChanged = this._updateSize(props);\n        const viewStateChanged = this._updateViewState(props, true);\n        this._updateStyle(props, oldProps);\n        this._updateStyleComponents(props, oldProps);\n        this._updateHandlers(props, oldProps);\n        // If 1) view state has changed to match props and\n        //    2) the props change is not triggered by map events,\n        // it's driven by an external state change. Redraw immediately\n        if (settingsChanged || sizeChanged || (viewStateChanged && !this._map.isMoving())) {\n            this.redraw();\n        }\n    }\n    static reuse(props, container) {\n        const that = Mapbox.savedMaps.pop();\n        if (!that) {\n            return null;\n        }\n        const map = that.map;\n        // When reusing the saved map, we need to reparent the map(canvas) and other child nodes\n        // intoto the new container from the props.\n        // Step 1: reparenting child nodes from old container to new container\n        const oldContainer = map.getContainer();\n        container.className = oldContainer.className;\n        while (oldContainer.childNodes.length > 0) {\n            container.appendChild(oldContainer.childNodes[0]);\n        }\n        // Step 2: replace the internal container with new container from the react component\n        // @ts-ignore\n        map._container = container;\n        // With maplibre-gl as mapLib, map uses ResizeObserver to observe when its container resizes.\n        // When reusing the saved map, we need to disconnect the observer and observe the new container.\n        // Step 3: telling the ResizeObserver to disconnect and observe the new container\n        // @ts-ignore\n        const resizeObserver = map._resizeObserver;\n        if (resizeObserver) {\n            resizeObserver.disconnect();\n            resizeObserver.observe(container);\n        }\n        // Step 4: apply new props\n        that.setProps({ ...props, styleDiffing: false });\n        map.resize();\n        const { initialViewState } = props;\n        if (initialViewState) {\n            if (initialViewState.bounds) {\n                map.fitBounds(initialViewState.bounds, { ...initialViewState.fitBoundsOptions, duration: 0 });\n            }\n            else {\n                that._updateViewState(initialViewState, false);\n            }\n        }\n        // Simulate load event\n        if (map.isStyleLoaded()) {\n            map.fire('load');\n        }\n        else {\n            map.once('styledata', () => map.fire('load'));\n        }\n        // Force reload\n        // @ts-ignore\n        map._update();\n        return that;\n    }\n    /* eslint-disable complexity,max-statements */\n    _initialize(container) {\n        const { props } = this;\n        const { mapStyle = DEFAULT_STYLE } = props;\n        const mapOptions = {\n            ...props,\n            ...props.initialViewState,\n            accessToken: props.mapboxAccessToken || getAccessTokenFromEnv() || null,\n            container,\n            style: normalizeStyle(mapStyle)\n        };\n        const viewState = mapOptions.initialViewState || mapOptions.viewState || mapOptions;\n        Object.assign(mapOptions, {\n            center: [viewState.longitude || 0, viewState.latitude || 0],\n            zoom: viewState.zoom || 0,\n            pitch: viewState.pitch || 0,\n            bearing: viewState.bearing || 0\n        });\n        if (props.gl) {\n            // eslint-disable-next-line\n            const getContext = HTMLCanvasElement.prototype.getContext;\n            // Hijack canvas.getContext to return our own WebGLContext\n            // This will be called inside the mapboxgl.Map constructor\n            // @ts-expect-error\n            HTMLCanvasElement.prototype.getContext = () => {\n                // Unhijack immediately\n                HTMLCanvasElement.prototype.getContext = getContext;\n                return props.gl;\n            };\n        }\n        const map = new this._MapClass(mapOptions);\n        // Props that are not part of constructor options\n        if (viewState.padding) {\n            map.setPadding(viewState.padding);\n        }\n        if (props.cursor) {\n            map.getCanvas().style.cursor = props.cursor;\n        }\n        this._createShadowTransform(map);\n        // Hack\n        // Insert code into map's render cycle\n        const renderMap = map._render;\n        map._render = (arg) => {\n            this._inRender = true;\n            renderMap.call(map, arg);\n            this._inRender = false;\n        };\n        const runRenderTaskQueue = map._renderTaskQueue.run;\n        map._renderTaskQueue.run = (arg) => {\n            runRenderTaskQueue.call(map._renderTaskQueue, arg);\n            this._onBeforeRepaint();\n        };\n        map.on('render', () => this._onAfterRepaint());\n        // Insert code into map's event pipeline\n        // eslint-disable-next-line @typescript-eslint/unbound-method\n        const fireEvent = map.fire;\n        map.fire = this._fireEvent.bind(this, fireEvent);\n        // add listeners\n        map.on('resize', () => {\n            this._renderTransform.resize(map.transform.width, map.transform.height);\n        });\n        map.on('styledata', () => {\n            this._updateStyleComponents(this.props, {});\n            // Projection can be set in stylesheet\n            syncProjection(map.transform, this._renderTransform);\n        });\n        map.on('sourcedata', () => this._updateStyleComponents(this.props, {}));\n        for (const eventName in pointerEvents) {\n            map.on(eventName, this._onPointerEvent);\n        }\n        for (const eventName in cameraEvents) {\n            map.on(eventName, this._onCameraEvent);\n        }\n        for (const eventName in otherEvents) {\n            map.on(eventName, this._onEvent);\n        }\n        this._map = map;\n    }\n    /* eslint-enable complexity,max-statements */\n    recycle() {\n        // Clean up unnecessary elements before storing for reuse.\n        const container = this.map.getContainer();\n        const children = container.querySelector('[mapboxgl-children]');\n        children === null || children === void 0 ? void 0 : children.remove();\n        Mapbox.savedMaps.push(this);\n    }\n    destroy() {\n        this._map.remove();\n    }\n    // Force redraw the map now. Typically resize() and jumpTo() is reflected in the next\n    // render cycle, which is managed by Mapbox's animation loop.\n    // This removes the synchronization issue caused by requestAnimationFrame.\n    redraw() {\n        const map = this._map;\n        // map._render will throw error if style does not exist\n        // https://github.com/mapbox/mapbox-gl-js/blob/fb9fc316da14e99ff4368f3e4faa3888fb43c513\n        //   /src/ui/map.js#L1834\n        if (!this._inRender && map.style) {\n            // cancel the scheduled update\n            if (map._frame) {\n                map._frame.cancel();\n                map._frame = null;\n            }\n            // the order is important - render() may schedule another update\n            map._render();\n        }\n    }\n    _createShadowTransform(map) {\n        const renderTransform = cloneTransform(map.transform);\n        map.painter.transform = renderTransform;\n        this._renderTransform = renderTransform;\n    }\n    /* Trigger map resize if size is controlled\n       @param {object} nextProps\n       @returns {bool} true if size has changed\n     */\n    _updateSize(nextProps) {\n        // Check if size is controlled\n        const { viewState } = nextProps;\n        if (viewState) {\n            const map = this._map;\n            if (viewState.width !== map.transform.width || viewState.height !== map.transform.height) {\n                map.resize();\n                return true;\n            }\n        }\n        return false;\n    }\n    // Adapted from map.jumpTo\n    /* Update camera to match props\n       @param {object} nextProps\n       @param {bool} triggerEvents - should fire camera events\n       @returns {bool} true if anything is changed\n     */\n    _updateViewState(nextProps, triggerEvents) {\n        if (this._internalUpdate) {\n            return false;\n        }\n        const map = this._map;\n        const tr = this._renderTransform;\n        // Take a snapshot of the transform before mutation\n        const { zoom, pitch, bearing } = tr;\n        const isMoving = map.isMoving();\n        if (isMoving) {\n            // All movement of the camera is done relative to the sea level\n            tr.cameraElevationReference = 'sea';\n        }\n        const changed = applyViewStateToTransform(tr, {\n            ...transformToViewState(map.transform),\n            ...nextProps\n        });\n        if (isMoving) {\n            // Reset camera reference\n            tr.cameraElevationReference = 'ground';\n        }\n        if (changed && triggerEvents) {\n            const deferredEvents = this._deferredEvents;\n            // Delay DOM control updates to the next render cycle\n            deferredEvents.move = true;\n            deferredEvents.zoom || (deferredEvents.zoom = zoom !== tr.zoom);\n            deferredEvents.rotate || (deferredEvents.rotate = bearing !== tr.bearing);\n            deferredEvents.pitch || (deferredEvents.pitch = pitch !== tr.pitch);\n        }\n        // Avoid manipulating the real transform when interaction/animation is ongoing\n        // as it would interfere with Mapbox's handlers\n        if (!isMoving) {\n            applyViewStateToTransform(map.transform, nextProps);\n        }\n        return changed;\n    }\n    /* Update camera constraints and projection settings to match props\n       @param {object} nextProps\n       @param {object} currProps\n       @returns {bool} true if anything is changed\n     */\n    _updateSettings(nextProps, currProps) {\n        const map = this._map;\n        let changed = false;\n        for (const propName of settingNames) {\n            if (propName in nextProps && !deepEqual(nextProps[propName], currProps[propName])) {\n                changed = true;\n                const setter = map[`set${propName[0].toUpperCase()}${propName.slice(1)}`];\n                setter === null || setter === void 0 ? void 0 : setter.call(map, nextProps[propName]);\n            }\n        }\n        return changed;\n    }\n    /* Update map style to match props\n       @param {object} nextProps\n       @param {object} currProps\n       @returns {bool} true if style is changed\n     */\n    _updateStyle(nextProps, currProps) {\n        if (nextProps.cursor !== currProps.cursor) {\n            this._map.getCanvas().style.cursor = nextProps.cursor;\n        }\n        if (nextProps.mapStyle !== currProps.mapStyle) {\n            const { mapStyle = DEFAULT_STYLE, styleDiffing = true } = nextProps;\n            const options = {\n                diff: styleDiffing\n            };\n            if ('localIdeographFontFamily' in nextProps) {\n                // @ts-ignore Mapbox specific prop\n                options.localIdeographFontFamily = nextProps.localIdeographFontFamily;\n            }\n            this._map.setStyle(normalizeStyle(mapStyle), options);\n            return true;\n        }\n        return false;\n    }\n    /* Update fog, light and terrain to match props\n       @param {object} nextProps\n       @param {object} currProps\n       @returns {bool} true if anything is changed\n     */\n    _updateStyleComponents(nextProps, currProps) {\n        const map = this._map;\n        let changed = false;\n        if (map.isStyleLoaded()) {\n            if ('light' in nextProps && map.setLight && !deepEqual(nextProps.light, currProps.light)) {\n                changed = true;\n                map.setLight(nextProps.light);\n            }\n            if ('fog' in nextProps && map.setFog && !deepEqual(nextProps.fog, currProps.fog)) {\n                changed = true;\n                map.setFog(nextProps.fog);\n            }\n            if ('terrain' in nextProps &&\n                map.setTerrain &&\n                !deepEqual(nextProps.terrain, currProps.terrain)) {\n                if (!nextProps.terrain || map.getSource(nextProps.terrain.source)) {\n                    changed = true;\n                    map.setTerrain(nextProps.terrain);\n                }\n            }\n        }\n        return changed;\n    }\n    /* Update interaction handlers to match props\n       @param {object} nextProps\n       @param {object} currProps\n       @returns {bool} true if anything is changed\n     */\n    _updateHandlers(nextProps, currProps) {\n        var _a, _b;\n        const map = this._map;\n        let changed = false;\n        for (const propName of handlerNames) {\n            const newValue = (_a = nextProps[propName]) !== null && _a !== void 0 ? _a : true;\n            const oldValue = (_b = currProps[propName]) !== null && _b !== void 0 ? _b : true;\n            if (!deepEqual(newValue, oldValue)) {\n                changed = true;\n                if (newValue) {\n                    map[propName].enable(newValue);\n                }\n                else {\n                    map[propName].disable();\n                }\n            }\n        }\n        return changed;\n    }\n    _queryRenderedFeatures(point) {\n        const map = this._map;\n        const { interactiveLayerIds = [] } = this.props;\n        try {\n            return map.queryRenderedFeatures(point, {\n                layers: interactiveLayerIds.filter(map.getLayer.bind(map))\n            });\n        }\n        catch (_a) {\n            // May fail if style is not loaded\n            return [];\n        }\n    }\n    _updateHover(e) {\n        var _a;\n        const { props } = this;\n        const shouldTrackHoveredFeatures = props.interactiveLayerIds && (props.onMouseMove || props.onMouseEnter || props.onMouseLeave);\n        if (shouldTrackHoveredFeatures) {\n            const eventType = e.type;\n            const wasHovering = ((_a = this._hoveredFeatures) === null || _a === void 0 ? void 0 : _a.length) > 0;\n            const features = this._queryRenderedFeatures(e.point);\n            const isHovering = features.length > 0;\n            if (!isHovering && wasHovering) {\n                e.type = 'mouseleave';\n                this._onPointerEvent(e);\n            }\n            this._hoveredFeatures = features;\n            if (isHovering && !wasHovering) {\n                e.type = 'mouseenter';\n                this._onPointerEvent(e);\n            }\n            e.type = eventType;\n        }\n        else {\n            this._hoveredFeatures = null;\n        }\n    }\n    _fireEvent(baseFire, event, properties) {\n        const map = this._map;\n        const tr = map.transform;\n        const eventType = typeof event === 'string' ? event : event.type;\n        if (eventType === 'move') {\n            this._updateViewState(this.props, false);\n        }\n        if (eventType in cameraEvents) {\n            if (typeof event === 'object') {\n                event.viewState = transformToViewState(tr);\n            }\n            if (this._map.isMoving()) {\n                // Replace map.transform with ours during the callbacks\n                map.transform = this._renderTransform;\n                baseFire.call(map, event, properties);\n                map.transform = tr;\n                return map;\n            }\n        }\n        baseFire.call(map, event, properties);\n        return map;\n    }\n    // All camera manipulations are complete, ready to repaint\n    _onBeforeRepaint() {\n        const map = this._map;\n        // If there are camera changes driven by props, invoke camera events so that DOM controls are synced\n        this._internalUpdate = true;\n        for (const eventType in this._deferredEvents) {\n            if (this._deferredEvents[eventType]) {\n                map.fire(eventType);\n            }\n        }\n        this._internalUpdate = false;\n        const tr = this._map.transform;\n        // Make sure camera matches the current props\n        map.transform = this._renderTransform;\n        this._onAfterRepaint = () => {\n            // Mapbox transitions between non-mercator projection and mercator during render time\n            // Copy it back to the other\n            syncProjection(this._renderTransform, tr);\n            // Restores camera state before render/load events are fired\n            map.transform = tr;\n        };\n    }\n}\nMapbox.savedMaps = [];\n/**\n * Access token can be provided via one of:\n *   mapboxAccessToken prop\n *   access_token query parameter\n *   MapboxAccessToken environment variable\n *   REACT_APP_MAPBOX_ACCESS_TOKEN environment variable\n * @returns access token\n */\nfunction getAccessTokenFromEnv() {\n    let accessToken = null;\n    /* global location, process */\n    if (typeof location !== 'undefined') {\n        const match = /access_token=([^&\\/]*)/.exec(location.search);\n        accessToken = match && match[1];\n    }\n    // Note: This depends on bundler plugins (e.g. webpack) importing environment correctly\n    try {\n        accessToken = accessToken || process.env.MapboxAccessToken;\n    }\n    catch (_a) {\n        // ignore\n    }\n    try {\n        accessToken = accessToken || process.env.REACT_APP_MAPBOX_ACCESS_TOKEN;\n    }\n    catch (_b) {\n        // ignore\n    }\n    return accessToken;\n}\n//# sourceMappingURL=mapbox.js.map","/** These methods may break the react binding if called directly */\nconst skipMethods = [\n    'setMaxBounds',\n    'setMinZoom',\n    'setMaxZoom',\n    'setMinPitch',\n    'setMaxPitch',\n    'setRenderWorldCopies',\n    'setProjection',\n    'setStyle',\n    'addSource',\n    'removeSource',\n    'addLayer',\n    'removeLayer',\n    'setLayerZoomRange',\n    'setFilter',\n    'setPaintProperty',\n    'setLayoutProperty',\n    'setLight',\n    'setTerrain',\n    'setFog',\n    'remove'\n];\nexport default function createRef(mapInstance) {\n    if (!mapInstance) {\n        return null;\n    }\n    const map = mapInstance.map;\n    const result = {\n        getMap: () => map,\n        // Overwrite getters to use our shadow transform\n        getCenter: () => mapInstance.transform.center,\n        getZoom: () => mapInstance.transform.zoom,\n        getBearing: () => mapInstance.transform.bearing,\n        getPitch: () => mapInstance.transform.pitch,\n        getPadding: () => mapInstance.transform.padding,\n        getBounds: () => mapInstance.transform.getBounds(),\n        project: (lnglat) => {\n            const tr = map.transform;\n            map.transform = mapInstance.transform;\n            const result = map.project(lnglat);\n            map.transform = tr;\n            return result;\n        },\n        unproject: (point) => {\n            const tr = map.transform;\n            map.transform = mapInstance.transform;\n            const result = map.unproject(point);\n            map.transform = tr;\n            return result;\n        },\n        // options diverge between mapbox and maplibre\n        queryTerrainElevation: (lnglat, options) => {\n            const tr = map.transform;\n            map.transform = mapInstance.transform;\n            const result = map.queryTerrainElevation(lnglat, options);\n            map.transform = tr;\n            return result;\n        }\n    };\n    for (const key of getMethodNames(map)) {\n        // @ts-expect-error\n        if (!(key in result) && !skipMethods.includes(key)) {\n            result[key] = map[key].bind(map);\n        }\n    }\n    return result;\n}\nfunction getMethodNames(obj) {\n    const result = new Set();\n    let proto = obj;\n    while (proto) {\n        for (const key of Object.getOwnPropertyNames(proto)) {\n            if (key[0] !== '_' &&\n                typeof obj[key] === 'function' &&\n                key !== 'fire' &&\n                key !== 'setEventedParent') {\n                result.add(key);\n            }\n        }\n        proto = Object.getPrototypeOf(proto);\n    }\n    return Array.from(result);\n}\n//# sourceMappingURL=create-ref.js.map","// From https://github.com/streamich/react-use/blob/master/src/useIsomorphicLayoutEffect.ts\n// useLayoutEffect but does not trigger warning in server-side rendering\nimport { useEffect, useLayoutEffect } from 'react';\nconst useIsomorphicLayoutEffect = typeof document !== 'undefined' ? useLayoutEffect : useEffect;\nexport default useIsomorphicLayoutEffect;\n//# sourceMappingURL=use-isomorphic-layout-effect.js.map","const globalSettings = [\n    'baseApiUrl',\n    'maxParallelImageRequests',\n    'workerClass',\n    'workerCount',\n    'workerUrl'\n];\nexport default function setGlobals(mapLib, props) {\n    for (const key of globalSettings) {\n        if (key in props) {\n            mapLib[key] = props[key];\n        }\n    }\n    const { RTLTextPlugin = 'https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js' } = props;\n    if (RTLTextPlugin &&\n        mapLib.getRTLTextPluginStatus &&\n        mapLib.getRTLTextPluginStatus() === 'unavailable') {\n        mapLib.setRTLTextPlugin(RTLTextPlugin, (error) => {\n            if (error) {\n                // eslint-disable-next-line\n                console.error(error);\n            }\n        }, false);\n    }\n}\n//# sourceMappingURL=set-globals.js.map","import * as React from 'react';\nimport { useState, useRef, useEffect, useContext, useMemo, useImperativeHandle } from 'react';\nimport { MountedMapsContext } from './use-map';\nimport Mapbox from '../mapbox/mapbox';\nimport createRef from '../mapbox/create-ref';\nimport useIsomorphicLayoutEffect from '../utils/use-isomorphic-layout-effect';\nimport setGlobals from '../utils/set-globals';\nexport const MapContext = React.createContext(null);\nexport default function Map(props, ref, defaultLib) {\n    const mountedMapsContext = useContext(MountedMapsContext);\n    const [mapInstance, setMapInstance] = useState(null);\n    const containerRef = useRef();\n    const { current: contextValue } = useRef({ mapLib: null, map: null });\n    useEffect(() => {\n        const mapLib = props.mapLib;\n        let isMounted = true;\n        let mapbox;\n        Promise.resolve(mapLib || defaultLib)\n            .then((module) => {\n            if (!isMounted) {\n                return;\n            }\n            if (!module) {\n                throw new Error('Invalid mapLib');\n            }\n            const mapboxgl = 'Map' in module ? module : module.default;\n            if (!mapboxgl.Map) {\n                throw new Error('Invalid mapLib');\n            }\n            // workerUrl & workerClass may change the result of supported()\n            // https://github.com/visgl/react-map-gl/discussions/2027\n            setGlobals(mapboxgl, props);\n            if (!mapboxgl.supported || mapboxgl.supported(props)) {\n                if (props.reuseMaps) {\n                    mapbox = Mapbox.reuse(props, containerRef.current);\n                }\n                if (!mapbox) {\n                    mapbox = new Mapbox(mapboxgl.Map, props, containerRef.current);\n                }\n                contextValue.map = createRef(mapbox);\n                contextValue.mapLib = mapboxgl;\n                setMapInstance(mapbox);\n                mountedMapsContext === null || mountedMapsContext === void 0 ? void 0 : mountedMapsContext.onMapMount(contextValue.map, props.id);\n            }\n            else {\n                throw new Error('Map is not supported by this browser');\n            }\n        })\n            .catch(error => {\n            const { onError } = props;\n            if (onError) {\n                onError({\n                    type: 'error',\n                    target: null,\n                    originalEvent: null,\n                    error\n                });\n            }\n            else {\n                console.error(error); // eslint-disable-line\n            }\n        });\n        return () => {\n            isMounted = false;\n            if (mapbox) {\n                mountedMapsContext === null || mountedMapsContext === void 0 ? void 0 : mountedMapsContext.onMapUnmount(props.id);\n                if (props.reuseMaps) {\n                    mapbox.recycle();\n                }\n                else {\n                    mapbox.destroy();\n                }\n            }\n        };\n    }, []);\n    useIsomorphicLayoutEffect(() => {\n        if (mapInstance) {\n            mapInstance.setProps(props);\n        }\n    });\n    useImperativeHandle(ref, () => contextValue.map, [mapInstance]);\n    const style = useMemo(() => ({\n        position: 'relative',\n        width: '100%',\n        height: '100%',\n        ...props.style\n    }), [props.style]);\n    const CHILD_CONTAINER_STYLE = {\n        height: '100%'\n    };\n    return (React.createElement(\"div\", { id: props.id, ref: containerRef, style: style }, mapInstance && (React.createElement(MapContext.Provider, { value: contextValue },\n        React.createElement(\"div\", { \"mapboxgl-children\": \"\", style: CHILD_CONTAINER_STYLE }, props.children)))));\n}\n//# sourceMappingURL=map.js.map","// This is a simplified version of\n// https://github.com/facebook/react/blob/4131af3e4bf52f3a003537ec95a1655147c81270/src/renderers/dom/shared/CSSPropertyOperations.js#L62\nconst unitlessNumber = /box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;\nexport function applyReactStyle(element, styles) {\n    if (!element || !styles) {\n        return;\n    }\n    const style = element.style;\n    for (const key in styles) {\n        const value = styles[key];\n        if (Number.isFinite(value) && !unitlessNumber.test(key)) {\n            style[key] = `${value}px`;\n        }\n        else {\n            style[key] = value;\n        }\n    }\n}\n//# sourceMappingURL=apply-react-style.js.map","/* global document */\nimport * as React from 'react';\nimport { createPortal } from 'react-dom';\nimport { useImperativeHandle, useEffect, useMemo, useRef, useContext, forwardRef, memo } from 'react';\nimport { applyReactStyle } from '../utils/apply-react-style';\nimport { MapContext } from './map';\nimport { arePointsEqual } from '../utils/deep-equal';\n/* eslint-disable complexity,max-statements */\nfunction Marker(props, ref) {\n    const { map, mapLib } = useContext(MapContext);\n    const thisRef = useRef({ props });\n    thisRef.current.props = props;\n    const marker = useMemo(() => {\n        let hasChildren = false;\n        React.Children.forEach(props.children, el => {\n            if (el) {\n                hasChildren = true;\n            }\n        });\n        const options = {\n            ...props,\n            element: hasChildren ? document.createElement('div') : null\n        };\n        const mk = new mapLib.Marker(options);\n        mk.setLngLat([props.longitude, props.latitude]);\n        mk.getElement().addEventListener('click', (e) => {\n            var _a, _b;\n            (_b = (_a = thisRef.current.props).onClick) === null || _b === void 0 ? void 0 : _b.call(_a, {\n                type: 'click',\n                target: mk,\n                originalEvent: e\n            });\n        });\n        mk.on('dragstart', e => {\n            var _a, _b;\n            const evt = e;\n            evt.lngLat = marker.getLngLat();\n            (_b = (_a = thisRef.current.props).onDragStart) === null || _b === void 0 ? void 0 : _b.call(_a, evt);\n        });\n        mk.on('drag', e => {\n            var _a, _b;\n            const evt = e;\n            evt.lngLat = marker.getLngLat();\n            (_b = (_a = thisRef.current.props).onDrag) === null || _b === void 0 ? void 0 : _b.call(_a, evt);\n        });\n        mk.on('dragend', e => {\n            var _a, _b;\n            const evt = e;\n            evt.lngLat = marker.getLngLat();\n            (_b = (_a = thisRef.current.props).onDragEnd) === null || _b === void 0 ? void 0 : _b.call(_a, evt);\n        });\n        return mk;\n    }, []);\n    useEffect(() => {\n        marker.addTo(map.getMap());\n        return () => {\n            marker.remove();\n        };\n    }, []);\n    const { longitude, latitude, offset, style, draggable = false, popup = null, rotation = 0, rotationAlignment = 'auto', pitchAlignment = 'auto' } = props;\n    useEffect(() => {\n        applyReactStyle(marker.getElement(), style);\n    }, [style]);\n    useImperativeHandle(ref, () => marker, []);\n    if (marker.getLngLat().lng !== longitude || marker.getLngLat().lat !== latitude) {\n        marker.setLngLat([longitude, latitude]);\n    }\n    if (offset && !arePointsEqual(marker.getOffset(), offset)) {\n        marker.setOffset(offset);\n    }\n    if (marker.isDraggable() !== draggable) {\n        marker.setDraggable(draggable);\n    }\n    if (marker.getRotation() !== rotation) {\n        marker.setRotation(rotation);\n    }\n    if (marker.getRotationAlignment() !== rotationAlignment) {\n        marker.setRotationAlignment(rotationAlignment);\n    }\n    if (marker.getPitchAlignment() !== pitchAlignment) {\n        marker.setPitchAlignment(pitchAlignment);\n    }\n    if (marker.getPopup() !== popup) {\n        marker.setPopup(popup);\n    }\n    return createPortal(props.children, marker.getElement());\n}\nexport default memo(forwardRef(Marker));\n//# sourceMappingURL=marker.js.map","import { createPortal } from 'react-dom';\nimport { useImperativeHandle, useEffect, useMemo, useRef, useContext, forwardRef, memo } from 'react';\nimport { applyReactStyle } from '../utils/apply-react-style';\nimport { MapContext } from './map';\nimport { deepEqual } from '../utils/deep-equal';\n// Adapted from https://github.com/mapbox/mapbox-gl-js/blob/v1.13.0/src/ui/popup.js\nfunction getClassList(className) {\n    return new Set(className ? className.trim().split(/\\s+/) : []);\n}\n/* eslint-disable complexity,max-statements */\nfunction Popup(props, ref) {\n    const { map, mapLib } = useContext(MapContext);\n    const container = useMemo(() => {\n        return document.createElement('div');\n    }, []);\n    const thisRef = useRef({ props });\n    thisRef.current.props = props;\n    const popup = useMemo(() => {\n        const options = { ...props };\n        const pp = new mapLib.Popup(options);\n        pp.setLngLat([props.longitude, props.latitude]);\n        pp.once('open', e => {\n            var _a, _b;\n            (_b = (_a = thisRef.current.props).onOpen) === null || _b === void 0 ? void 0 : _b.call(_a, e);\n        });\n        return pp;\n    }, []);\n    useEffect(() => {\n        const onClose = e => {\n            var _a, _b;\n            (_b = (_a = thisRef.current.props).onClose) === null || _b === void 0 ? void 0 : _b.call(_a, e);\n        };\n        popup.on('close', onClose);\n        popup.setDOMContent(container).addTo(map.getMap());\n        return () => {\n            // https://github.com/visgl/react-map-gl/issues/1825\n            // onClose should not be fired if the popup is removed by unmounting\n            // When using React strict mode, the component is mounted twice.\n            // Firing the onClose callback here would be a false signal to remove the component.\n            popup.off('close', onClose);\n            if (popup.isOpen()) {\n                popup.remove();\n            }\n        };\n    }, []);\n    useEffect(() => {\n        applyReactStyle(popup.getElement(), props.style);\n    }, [props.style]);\n    useImperativeHandle(ref, () => popup, []);\n    if (popup.isOpen()) {\n        if (popup.getLngLat().lng !== props.longitude || popup.getLngLat().lat !== props.latitude) {\n            popup.setLngLat([props.longitude, props.latitude]);\n        }\n        if (props.offset && !deepEqual(popup.options.offset, props.offset)) {\n            popup.setOffset(props.offset);\n        }\n        if (popup.options.anchor !== props.anchor || popup.options.maxWidth !== props.maxWidth) {\n            popup.options.anchor = props.anchor;\n            popup.setMaxWidth(props.maxWidth);\n        }\n        if (popup.options.className !== props.className) {\n            const prevClassList = getClassList(popup.options.className);\n            const nextClassList = getClassList(props.className);\n            for (const c of prevClassList) {\n                if (!nextClassList.has(c)) {\n                    popup.removeClassName(c);\n                }\n            }\n            for (const c of nextClassList) {\n                if (!prevClassList.has(c)) {\n                    popup.addClassName(c);\n                }\n            }\n            popup.options.className = props.className;\n        }\n    }\n    return createPortal(props.children, container);\n}\nexport default memo(forwardRef(Popup));\n//# sourceMappingURL=popup.js.map","import { useContext, useMemo, useEffect } from 'react';\nimport { MapContext } from './map';\nfunction useControl(onCreate, arg1, arg2, arg3) {\n    const context = useContext(MapContext);\n    const ctrl = useMemo(() => onCreate(context), []);\n    useEffect(() => {\n        const opts = (arg3 || arg2 || arg1);\n        const onAdd = typeof arg1 === 'function' && typeof arg2 === 'function' ? arg1 : null;\n        const onRemove = typeof arg2 === 'function' ? arg2 : typeof arg1 === 'function' ? arg1 : null;\n        const { map } = context;\n        if (!map.hasControl(ctrl)) {\n            map.addControl(ctrl, opts === null || opts === void 0 ? void 0 : opts.position);\n            if (onAdd) {\n                onAdd(context);\n            }\n        }\n        return () => {\n            if (onRemove) {\n                onRemove(context);\n            }\n            // Map might have been removed (parent effects are destroyed before child ones)\n            if (map.hasControl(ctrl)) {\n                map.removeControl(ctrl);\n            }\n        };\n    }, []);\n    return ctrl;\n}\nexport default useControl;\n//# sourceMappingURL=use-control.js.map","import { useEffect, memo } from 'react';\nimport { applyReactStyle } from '../utils/apply-react-style';\nimport useControl from './use-control';\nfunction AttributionControl(props) {\n    const ctrl = useControl(({ mapLib }) => new mapLib.AttributionControl(props), {\n        position: props.position\n    });\n    useEffect(() => {\n        applyReactStyle(ctrl._container, props.style);\n    }, [props.style]);\n    return null;\n}\nexport default memo(AttributionControl);\n//# sourceMappingURL=attribution-control.js.map","import { useEffect, memo } from 'react';\nimport { applyReactStyle } from '../utils/apply-react-style';\nimport useControl from './use-control';\nfunction FullscreenControl(props) {\n    const ctrl = useControl(({ mapLib }) => new mapLib.FullscreenControl({\n        container: props.containerId && document.getElementById(props.containerId)\n    }), { position: props.position });\n    useEffect(() => {\n        applyReactStyle(ctrl._controlContainer, props.style);\n    }, [props.style]);\n    return null;\n}\nexport default memo(FullscreenControl);\n//# sourceMappingURL=fullscreen-control.js.map","import { useImperativeHandle, useRef, useEffect, forwardRef, memo } from 'react';\nimport { applyReactStyle } from '../utils/apply-react-style';\nimport useControl from './use-control';\nfunction GeolocateControl(props, ref) {\n    const thisRef = useRef({ props });\n    const ctrl = useControl(({ mapLib }) => {\n        const gc = new mapLib.GeolocateControl(props);\n        // Hack: fix GeolocateControl reuse\n        // When using React strict mode, the component is mounted twice.\n        // GeolocateControl's UI creation is asynchronous. Removing and adding it back causes the UI to be initialized twice.\n        // @ts-expect-error private method\n        const setupUI = gc._setupUI;\n        // @ts-expect-error private method\n        gc._setupUI = args => {\n            if (!gc._container.hasChildNodes()) {\n                setupUI(args);\n            }\n        };\n        gc.on('geolocate', e => {\n            var _a, _b;\n            (_b = (_a = thisRef.current.props).onGeolocate) === null || _b === void 0 ? void 0 : _b.call(_a, e);\n        });\n        gc.on('error', e => {\n            var _a, _b;\n            (_b = (_a = thisRef.current.props).onError) === null || _b === void 0 ? void 0 : _b.call(_a, e);\n        });\n        gc.on('outofmaxbounds', e => {\n            var _a, _b;\n            (_b = (_a = thisRef.current.props).onOutOfMaxBounds) === null || _b === void 0 ? void 0 : _b.call(_a, e);\n        });\n        gc.on('trackuserlocationstart', e => {\n            var _a, _b;\n            (_b = (_a = thisRef.current.props).onTrackUserLocationStart) === null || _b === void 0 ? void 0 : _b.call(_a, e);\n        });\n        gc.on('trackuserlocationend', e => {\n            var _a, _b;\n            (_b = (_a = thisRef.current.props).onTrackUserLocationEnd) === null || _b === void 0 ? void 0 : _b.call(_a, e);\n        });\n        return gc;\n    }, { position: props.position });\n    thisRef.current.props = props;\n    useImperativeHandle(ref, () => ctrl, []);\n    useEffect(() => {\n        applyReactStyle(ctrl._container, props.style);\n    }, [props.style]);\n    return null;\n}\nexport default memo(forwardRef(GeolocateControl));\n//# sourceMappingURL=geolocate-control.js.map","import { useEffect, memo } from 'react';\nimport { applyReactStyle } from '../utils/apply-react-style';\nimport useControl from './use-control';\nfunction NavigationControl(props) {\n    const ctrl = useControl(({ mapLib }) => new mapLib.NavigationControl(props), {\n        position: props.position\n    });\n    useEffect(() => {\n        applyReactStyle(ctrl._container, props.style);\n    }, [props.style]);\n    return null;\n}\nexport default memo(NavigationControl);\n//# sourceMappingURL=navigation-control.js.map","import { useEffect, useRef, memo } from 'react';\nimport { applyReactStyle } from '../utils/apply-react-style';\nimport useControl from './use-control';\nfunction ScaleControl(props) {\n    const ctrl = useControl(({ mapLib }) => new mapLib.ScaleControl(props), {\n        position: props.position\n    });\n    const propsRef = useRef(props);\n    const prevProps = propsRef.current;\n    propsRef.current = props;\n    const { style } = props;\n    if (props.maxWidth !== undefined && props.maxWidth !== prevProps.maxWidth) {\n        ctrl.options.maxWidth = props.maxWidth;\n    }\n    if (props.unit !== undefined && props.unit !== prevProps.unit) {\n        ctrl.setUnit(props.unit);\n    }\n    useEffect(() => {\n        applyReactStyle(ctrl._container, style);\n    }, [style]);\n    return null;\n}\nexport default memo(ScaleControl);\n//# sourceMappingURL=scale-control.js.map","import * as React from 'react';\nimport { default as _Map } from './components/map';\nimport { default as _Marker } from './components/marker';\nimport { default as _Popup } from './components/popup';\nimport { default as _AttributionControl } from './components/attribution-control';\nimport { default as _FullscreenControl } from './components/fullscreen-control';\nimport { default as _GeolocateControl } from './components/geolocate-control';\nimport { default as _NavigationControl } from './components/navigation-control';\nimport { default as _ScaleControl } from './components/scale-control';\nimport { useMap as _useMap } from './components/use-map';\nexport function useMap() {\n    return _useMap();\n}\nconst mapLib = import('mapbox-gl');\nexport const Map = (() => {\n    return React.forwardRef(function Map(props, ref) {\n        return _Map(props, ref, mapLib);\n    });\n})();\nexport const Marker = _Marker;\nexport const Popup = _Popup;\nexport const AttributionControl = _AttributionControl;\nexport const FullscreenControl = _FullscreenControl;\nexport const NavigationControl = _NavigationControl;\nexport const GeolocateControl = _GeolocateControl;\nexport const ScaleControl = _ScaleControl;\nexport { default as Source } from './components/source';\nexport { default as Layer } from './components/layer';\nexport { default as useControl } from './components/use-control';\nexport { MapProvider } from './components/use-map';\nexport default Map;\n// Types\nexport * from './types/public';\n//# sourceMappingURL=exports-mapbox.js.map"],"file":"assets/exports-mapbox-5254a25e.js"}