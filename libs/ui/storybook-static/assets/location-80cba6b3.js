import{r as f}from"./index-76fb7be0.js";import{u as M}from"./exports-mapbox-5254a25e.js";import{i as d,a as O,b as P,c as R,O as v,o as _,r as U,d as z,S as F}from"./Subject-4219f2ee.js";import{e as p,c as I,d as x,f as V,g as k,h as m,b as j,i as D,j as Y}from"./tslib.es6-16d17d01.js";function G(e){return d(e==null?void 0:e.lift)}function b(e){return function(r){if(G(r))return r.lift(function(t){try{return e(t,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function g(e,r,t,n,i){return new J(e,r,t,n,i)}var J=function(e){p(r,e);function r(t,n,i,o,a,c){var s=e.call(this,t)||this;return s.onFinalize=a,s.shouldUnsubscribe=c,s._next=n?function(u){try{n(u)}catch(l){t.error(l)}}:e.prototype._next,s._error=o?function(u){try{o(u)}catch(l){t.error(l)}finally{this.unsubscribe()}}:e.prototype._error,s._complete=i?function(){try{i()}catch(u){t.error(u)}finally{this.unsubscribe()}}:e.prototype._complete,s}return r.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}},r}(O),L={now:function(){return(L.delegate||Date).now()},delegate:void 0},W=function(e){p(r,e);function r(t,n){return e.call(this)||this}return r.prototype.schedule=function(t,n){return this},r}(P),y={setInterval:function(e,r){for(var t=[],n=2;n<arguments.length;n++)t[n-2]=arguments[n];var i=y.delegate;return i!=null&&i.setInterval?i.setInterval.apply(i,I([e,r],x(t))):setInterval.apply(void 0,I([e,r],x(t)))},clearInterval:function(e){var r=y.delegate;return((r==null?void 0:r.clearInterval)||clearInterval)(e)},delegate:void 0},q=function(e){p(r,e);function r(t,n){var i=e.call(this,t,n)||this;return i.scheduler=t,i.work=n,i.pending=!1,i}return r.prototype.schedule=function(t,n){var i;if(n===void 0&&(n=0),this.closed)return this;this.state=t;var o=this.id,a=this.scheduler;return o!=null&&(this.id=this.recycleAsyncId(a,o,n)),this.pending=!0,this.delay=n,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(a,this.id,n),this},r.prototype.requestAsyncId=function(t,n,i){return i===void 0&&(i=0),y.setInterval(t.flush.bind(t,this),i)},r.prototype.recycleAsyncId=function(t,n,i){if(i===void 0&&(i=0),i!=null&&this.delay===i&&this.pending===!1)return n;n!=null&&y.clearInterval(n)},r.prototype.execute=function(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(t,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},r.prototype._execute=function(t,n){var i=!1,o;try{this.work(t)}catch(a){i=!0,o=a||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),o},r.prototype.unsubscribe=function(){if(!this.closed){var t=this,n=t.id,i=t.scheduler,o=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,R(o,this),n!=null&&(this.id=this.recycleAsyncId(i,n,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},r}(W),A=function(){function e(r,t){t===void 0&&(t=e.now),this.schedulerActionCtor=r,this.now=t}return e.prototype.schedule=function(r,t,n){return t===void 0&&(t=0),new this.schedulerActionCtor(this,r).schedule(n,t)},e.now=L.now,e}(),B=function(e){p(r,e);function r(t,n){n===void 0&&(n=A.now);var i=e.call(this,t,n)||this;return i.actions=[],i._active=!1,i}return r.prototype.flush=function(t){var n=this.actions;if(this._active){n.push(t);return}var i;this._active=!0;do if(i=t.execute(t.state,t.delay))break;while(t=n.shift());if(this._active=!1,i){for(;t=n.shift();)t.unsubscribe();throw i}},r}(A),H=new B(q),$=new v(function(e){return e.complete()}),C=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};function Q(e){return d(e==null?void 0:e.then)}function Z(e){return d(e[_])}function K(e){return Symbol.asyncIterator&&d(e==null?void 0:e[Symbol.asyncIterator])}function N(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function X(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ee=X();function te(e){return d(e==null?void 0:e[ee])}function ne(e){return V(this,arguments,function(){var t,n,i,o;return k(this,function(a){switch(a.label){case 0:t=e.getReader(),a.label=1;case 1:a.trys.push([1,,9,10]),a.label=2;case 2:return[4,m(t.read())];case 3:return n=a.sent(),i=n.value,o=n.done,o?[4,m(void 0)]:[3,5];case 4:return[2,a.sent()];case 5:return[4,m(i)];case 6:return[4,a.sent()];case 7:return a.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}function re(e){return d(e==null?void 0:e.getReader)}function ie(e){if(e instanceof v)return e;if(e!=null){if(Z(e))return oe(e);if(C(e))return ae(e);if(Q(e))return se(e);if(K(e))return E(e);if(te(e))return ue(e);if(re(e))return ce(e)}throw N(e)}function oe(e){return new v(function(r){var t=e[_]();if(d(t.subscribe))return t.subscribe(r);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function ae(e){return new v(function(r){for(var t=0;t<e.length&&!r.closed;t++)r.next(e[t]);r.complete()})}function se(e){return new v(function(r){e.then(function(t){r.closed||(r.next(t),r.complete())},function(t){return r.error(t)}).then(null,U)})}function ue(e){return new v(function(r){var t,n;try{for(var i=j(e),o=i.next();!o.done;o=i.next()){var a=o.value;if(r.next(a),r.closed)return}}catch(c){t={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}r.complete()})}function E(e){return new v(function(r){le(e,r).catch(function(t){return r.error(t)})})}function ce(e){return E(ne(e))}function le(e,r){var t,n,i,o;return D(this,void 0,void 0,function(){var a,c;return k(this,function(s){switch(s.label){case 0:s.trys.push([0,5,6,11]),t=Y(e),s.label=1;case 1:return[4,t.next()];case 2:if(n=s.sent(),!!n.done)return[3,4];if(a=n.value,r.next(a),r.closed)return[2];s.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return c=s.sent(),i={error:c},[3,11];case 6:return s.trys.push([6,,9,10]),n&&!n.done&&(o=t.return)?[4,o.call(t)]:[3,8];case 7:s.sent(),s.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return r.complete(),[2]}})})}function T(e){return b(function(r,t){var n=null,i=!1,o;n=r.subscribe(g(t,void 0,void 0,function(a){o=ie(e(a,T(e)(r))),n?(n.unsubscribe(),n=null,o.subscribe(t)):i=!0})),i&&(n.unsubscribe(),n=null,o.subscribe(t))})}function fe(e,r){return r===void 0&&(r=H),b(function(t,n){var i=null,o=null,a=null,c=function(){if(i){i.unsubscribe(),i=null;var u=o;o=null,n.next(u)}};function s(){var u=a+e,l=r.now();if(l<u){i=this.schedule(void 0,u-l),n.add(i);return}c()}t.subscribe(g(n,function(u){o=u,a=r.now(),i||(i=r.schedule(s,e),n.add(i))},function(){c(),n.complete()},void 0,function(){o=i=null}))})}function de(e,r,t){var n=d(e)||r||t?{next:e,error:r,complete:t}:e;return n?b(function(i,o){var a;(a=n.subscribe)===null||a===void 0||a.call(n);var c=!0;i.subscribe(g(o,function(s){var u;(u=n.next)===null||u===void 0||u.call(n,s),o.next(s)},function(){var s;c=!1,(s=n.complete)===null||s===void 0||s.call(n),o.complete()},function(s){var u;c=!1,(u=n.error)===null||u===void 0||u.call(n,s),o.error(s)},function(){var s,u;c&&((s=n.unsubscribe)===null||s===void 0||s.call(n)),(u=n.finalize)===null||u===void 0||u.call(n)}))}):z}const he=(e=1e3)=>{const[r]=f.useState(()=>new F);return f.useEffect(()=>{const t=r.pipe(fe(e),de(n=>n()),T(()=>$)).subscribe();return()=>t.unsubscribe()},[e,r]),r},ve=(e,r=1e3)=>{const[t,n]=f.useState(e),i=he(r);return f.useEffect(()=>{i.next(()=>n(e))},[i,e]),t},ge=()=>{const[e,r]=f.useState(""),[t,n]=f.useState(!1),[i,o]=f.useState(()=>[]),a=ve(e);return f.useEffect(()=>{n(!0),fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${a}.json?fuzzyMatch=true&access_token=pk.eyJ1IjoiaWFta2FydGhpY2siLCJhIjoiY2t4b3AwNjZ0MGtkczJub2VqMDZ6OWNrYSJ9.-FMKkHQHvHUeDEvxz2RJWQ`).then(c=>c.json()).then(c=>{var u;const s=(u=c.features)==null?void 0:u.map(l=>({placeName:l.place_name,latLng:[l.center[1],l.center[0]]}));o(s)}).finally(()=>n(!1))},[a,o]),{loading:t,setLoading:n,searchText:e,setSearchText:r,locationInfo:i}},we=({reports:e=[]})=>{const{current:r}=M();f.useEffect(()=>{var u,l,w,S;const t=e.map(h=>h.location);if(t.length===0)return;let n=((u=t[0])==null?void 0:u.latitude)||0,i=((l=t[0])==null?void 0:l.latitude)||0,o=((w=t[0])==null?void 0:w.longitude)||0,a=((S=t[0])==null?void 0:S.longitude)||0;t.forEach(h=>{h&&(n=Math.min(n,h.latitude),i=Math.max(i,h.latitude),o=Math.min(o,h.longitude),a=Math.max(a,h.longitude))});const c=(i-n)*.4,s=(a-o)*.4;n-=c,i+=c,o-=s,a+=s,r==null||r.fitBounds([[o,n],[a,i]],{padding:50})},[e,r])};export{we as a,ge as u};
//# sourceMappingURL=location-80cba6b3.js.map
