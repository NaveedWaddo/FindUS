import{j as e}from"./jsx-runtime-ffb262ed.js";import{B as F}from"./Button-5075d3c0.js";import{H as i}from"./HtmlInput-c822fede.js";import{H as m}from"./HtmlLabel-7b6b9606.js";import{L as S}from"./link-8fb8b7fe.js";import{g as P,r as R}from"./index-1ab85060.js";import"./index-80b30449.js";import{u as k,a as A,I}from"./fetcher-77976384.js";import{u as L,a as B,s as H,b as C}from"./index-95a7abba.js";import{n as D}from"./subjects-5c717a40.js";import{r as O}from"./router-c84c0459.js";import{r as x}from"./index-76fb7be0.js";import"./index-545830e9.js";import{F as $}from"./Form-d45ff289.js";import{P as q}from"./PlainButton-b2040916.js";import"./Loader-777f291b.js";import"./createReactComponent-d5b921f8.js";import"./index-8d47fad6.js";import"./_commonjsHelpers-de833af9.js";import"./FormError-360f8036.js";import"./IconExclamationCircle-1d6b43d4.js";import"./_interop_require_wildcard-408360b9.js";import"./add-base-path-6b389b03.js";import"./router-context-0eea364d.js";import"./app-router-context-22d29efd.js";import"./firebase-79125986.js";import"./tslib.es6-16d17d01.js";import"./typeof-7fd5df1e.js";import"./index-d3ea75b5.js";import"./hoist-non-react-statics.cjs-3f8ebaa8.js";import"./react-is.production.min-a192e302.js";import"./Subject-4219f2ee.js";import"./head-manager-context-283aaa20.js";const n=({role:l,className:U})=>{var d,u,f;const{register:o,handleSubmit:N,formState:{errors:t}}=k(),b=L(),{data:V,loading:v,error:a,success:c,callAsyncFn:w}=A(r=>R(r),r=>(console.log("err",r),r.code==="auth/email-already-in-use"?"Registration failed.":"Something went wrong. Please try again.")),_=O.useRouter();x.useEffect(()=>{a&&D.next({message:a,duration:8e3})},[a]);const p=B(H);return x.useEffect(()=>{(c||p)&&_.push("/")},[c,p]),e.jsxs("div",{children:[e.jsxs($,{className:l==="officer"?"pointer-events-none opacity-40 ":"",onSubmit:N(async({email:r,password:E,displayName:g})=>{b(C(g||"")),await w({email:r,password:E,displayName:g})}),children:[e.jsx(m,{title:"Email",error:(d=t.email)==null?void 0:d.message,children:e.jsx(i,{placeholder:"Enter the email.",...o("email")})}),e.jsx(m,{title:"Password",error:(u=t.password)==null?void 0:u.message,children:e.jsx(i,{type:"password",placeholder:"······",...o("password")})}),e.jsx(m,{title:"Display name",error:(f=t.displayName)==null?void 0:f.message,children:e.jsx(i,{placeholder:"Enter your name.",...o("displayName")})}),Object.keys(t).length?e.jsxs("div",{className:"text-xs text-gray-600",children:["Please fix the above ",Object.keys(t).length," errors"]}):null,e.jsx(F,{type:"submit",isLoading:v,fullWidth:!0,children:"Create account"})]}),e.jsxs("div",{className:"mt-4 text-sm ",children:["Already have an FindUS account?",e.jsx("br",{}),e.jsx(S,{href:"/login",className:"font-bold underline underline-offset-4",children:"Login"})," ","now."]}),e.jsx("div",{className:"mt-4 text-xs text-center text-gray",children:"Continue with"}),e.jsx("div",{className:"flex justify-center gap-2 mt-2",children:e.jsx(q,{className:"p-1 border-2 border-black rounded-full hover:shadow-lg",onClick:P,children:e.jsx(I,{})})})]})};try{n.displayName="RegisterForm",n.__docgenInfo={description:"",displayName:"RegisterForm",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},role:{defaultValue:null,description:"",name:"role",required:!1,type:{name:"enum",value:[{value:'"admin"'},{value:'"officer"'},{value:'"witness"'}]}}}}}catch{}const ve={component:n},s={};var h,y,j;s.parameters={...s.parameters,docs:{...(h=s.parameters)==null?void 0:h.docs,source:{originalSource:"{}",...(j=(y=s.parameters)==null?void 0:y.docs)==null?void 0:j.source}}};const we=["Primary"];export{s as Primary,we as __namedExportsOrder,ve as default};
//# sourceMappingURL=RegisterForm.stories-b7f3c4eb.js.map
